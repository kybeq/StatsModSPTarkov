{% extends "base.html" %}

{% block title %}Lista Graczy - StatsMod{% endblock %}

{% block content %}
{# Twoja oryginalna sekcja, bez zmian w klasach i strukturze, tylko dynamiczne dane #}
<section>
    <div class="row g-5">
        <div class="col-md-12 col-sm-12">
            <h1 class="mb-5">Tabela najlepszych</h1>

            {% if errors %}
                <div class="alert alert-danger" role="alert">
                    <h4 class="alert-heading">Wystąpiły błędy podczas ładowania danych!</h4>
                    <ul>
                        {% for error_msg in errors %}
                            <li>{{ error_msg }}</li>
                        {% endfor %}
                    </ul>
                    <hr>
                    <p class="mb-0">Sprawdź konsolę serwera po więcej informacji.</p>
                </div>
            {% endif %}

            {% if players_list %}
            <div class="table-responsive">
                {# Twoja oryginalna tabela z klasą table-striped-columns #}
                <table class="table table-striped-columns text-center"> 
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Nick</th>
                            <th scope="col">Lvl</th>
                            <th scope="col">Frakcja</th>
                            <th scope="col">Rajdy</th>
                            <th scope="col">Przetrwano</th>      {# Zachowuję Twoje oryginalne nazwy kolumn #}
                            <th scope="col">Death</th>
                            <th scope="col">Total Exp</th>
                            <th scope="col">Headshot</th>
                            <th scope="col">K/D</th>
                            <th scope="col">Profil</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for player in players_list %}
                        <tr>
                            <th scope="row">{{ loop.index }}</th>
                            <td>{{ player.nickname }}</td>
                            <td>{{ player.latest_level }}</td>
                            <td>{{ get_item_name(player.latest_side) }}</td> {# Dla tłumaczenia frakcji #}
                            <td>{{ player.raid_count }}</td>
                            <td>{{ player.total_survived }}</td> {# "Ok" interpretuję jako liczbę przetrwanych rajdów #}
                            <td>{{ player.total_deaths }}</td>   {# "Death" jako liczbę zgonów #}
                            <td>{{ player.latest_total_experience_formatted }}</td> {# Zakładamy, że jest sformatowane #}
                            <td>{{ player.total_headshots }}</td>
                            <td>{{ player.calculated_kd }}</td>
                            <td>
                                {# Twój oryginalny przycisk, teraz z dynamicznym linkiem #}
                                <a href="{{ url_for('main_routes.player_details_route', nickname=player.nickname) }}" 
                                   class="btn btn-secondary btn-sm">zobacz</a> 
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <p class="text-center mt-3">Brak zarejestrowanych graczy do wyświetlenia.</p>
            {% endif %}
        </div>
    </div>
</section>
{# Usunięto </div>, który był na końcu Twojego oryginalnego szablonu, ponieważ main.container jest zamykany w base.html #}
{% endblock %}