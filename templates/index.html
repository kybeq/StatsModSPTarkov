{% extends "base.html" %} {% block title %}Strona Główna - Analizator Rajdów{%
endblock %} {% block content %}
<!-- Sekcja powitalna (Hero) -->
<section class="hero-section text-center py-5 mb-5">
  <div class="container">
    <h1 class="display-3 fw-bold">Witaj w Analizatorze Rajdów</h1>
    <p class="lead text-muted">
      Śledź swoje rajdy, analizuj wyniki i odkrywaj najlepszych graczy!
    </p>
    <a href="#raids" class="btn btn-primary btn-lg mt-3">
      <i class="fas fa-flag-checkered me-2"></i>Zobacz ostatnie rajdy
    </a>
  </div>
</section>

<!-- Sekcja błędów -->
{% if errors %}
<div class="container mb-5">
  <div class="alert alert-danger" role="alert">
    <h2>
      <i class="fas fa-exclamation-triangle me-2"></i>Wystąpiły błędy podczas
      ładowania danych:
    </h2>
    <ul>
      {% for error in errors %}
      <li>{{ error }}</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endif %}

<!-- Sekcja ostatniego rajdu -->
{% if latest_raid %}
<section id="raids" class="container mb-5">
  <h2 class="mb-4">
    <i class="fas fa-flag-checkered me-2"></i>Ostatni zarejestrowany rajd
  </h2>
  <div class="card shadow-sm animate-fade-in">
    <div class="row g-0">
      <div class="col-md-6">
        <img
          src="{{ url_for('static', filename='images/maps/factory.avif') }}"
          class="img-fluid rounded-start"
          alt="Ostatni rajd"
        />
      </div>
      <div class="col-md-6">
        <div class="card-body">
          <h3 class="card-title">{{ latest_raid.location }}</h3>
          <div class="mb-3">
            <i class="fas fa-user me-2"></i><strong>Gracz:</strong> {{
            latest_raid.nickname }}
          </div>
          <div class="mb-3">
            <i class="fas fa-trophy me-2"></i><strong>Wynik:</strong> {{
            latest_raid.raid_result }}
          </div>
          <div class="mb-3">
            <i class="fas fa-clock me-2"></i><strong>Czas:</strong> {{
            latest_raid.play_time_formatted }}
          </div>
          <div class="mb-3">
            <i class="fas fa-calendar-alt me-2"></i><strong>Data:</strong>
            {{ latest_raid.timestamp.strftime('%Y-%m-%d %H:%M:%S') if
            latest_raid.timestamp else 'Brak daty' }}
          </div>
          <a
            href="{{ url_for('raid_details', filename=latest_raid.filename) }}"
            class="btn btn-primary"
          >
            <i class="fas fa-eye me-2"></i>Zobacz szczegóły
          </a>
          <p class="card-text mt-3">
            <small class="text-muted">
              Ostatnia aktualizacja: {{ latest_raid.timestamp.strftime('%Y-%m-%d
              %H:%M:%S') if latest_raid.timestamp else 'Brak daty' }}
            </small>
          </p>
        </div>
      </div>
    </div>
  </div>
</section>
{% endif %}

<!-- Sekcja graczy -->
<section id="players" class="container mb-5">
  <h2 class="mb-4"><i class="fas fa-users me-2"></i>Gracze</h2>
  {% if players %}
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    {% for nickname, player_info in players %}
    <div class="col">
      <div class="card h-100 shadow-sm animate-fade-in">
        <div class="card-body">
          <h5 class="card-title">
            <a
              href="{{ url_for('player_details', nickname=nickname) }}"
              class="text-decoration-none text-primary"
            >
              {{ nickname }}
            </a>
          </h5>
          <ul class="list-unstyled">
            <li class="mb-2">
              <i class="fas fa-level-up-alt me-2"></i
              ><strong>Poziom:</strong> {{ player_info.latest_level }}
            </li>
            <li class="mb-2">
              <i class="fas fa-shield-alt me-2"></i><strong>Strona:</strong> {{
              player_info.latest_side }}
            </li>
            <li class="mb-2">
              <i class="fas fa-flag-checkered me-2"></i
              ><strong>Rajdów:</strong> {{ player_info.raid_count }}
            </li>
          </ul>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="alert alert-warning" role="alert">
    <i class="fas fa-exclamation-circle me-2"></i>Brak znalezionych graczy.
  </div>
  {% endif %}
</section>
{% endblock %}
